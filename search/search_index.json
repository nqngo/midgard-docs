{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Midgard","text":"<p>Welcome to Midgard, a private OpenStack cloud for VAIT testing, training, and development purposes. Currently, Midgard offers the following capacities:</p> <ul> <li>Virtual Machines</li> <li>Automatic SSL termination via Cloudflare Tunnel</li> </ul> <p>Default quota:</p> Property Value Instances 1 VCPUS 2 RAM 4GB <p>Please note that Midgard is a private lab and its service uptime is not guaranteed. Your project may be decommissioned to support other users, and it will be automatically deleted after 30 days. If you require a longer retention period, please renew your project before the 30-day period by running <code>/midgard renew</code>.</p>"},{"location":"#limitations","title":"Limitations","text":"<p>Please be aware of the following limitations when using Midgard:</p> <ol> <li>Midgard does not have public IP addresses, so you will not be able to provide direct access to your instance. You will need to use <code>cloudflared</code> tunnel to access your instance unless it is served over HTTPS.</li> <li>Midgard is a self-serviced Infrastructure-as-a-Service platform. You are responsible for setting up, maintaining, and upgrading your own instances.</li> </ol>"},{"location":"#quick-start","title":"Quick Start","text":"<p>To request access, simply use the following slash command in the VAIT Discord:</p> <pre><code>/midgard register\n</code></pre> <p>Once your request is provisioned, @Midgard Cloud bot will notify you about your access.</p>"},{"location":"intro-to-cloud/","title":"Introduction to Cloud Computing","text":"<p>This section contains important pre-reading if you are completely new to Cloud Computing. Understanding this information, it will make the instructions in Cloud Starter easier to follow.</p>"},{"location":"intro-to-cloud/#what-is-the-midgard-cloud","title":"What is the Midgard Cloud?","text":"<p>The Midgard Cloud is a way of accessing computing resources for training and development purpose, where you use your own computer as the controls &amp; access point. You can request on-demand delivery of IT resources instead of buying, owning, and maintaining physical data centers and servers. </p> <p>This service from VAIT will allow to focus on delivering your learning projects at no cost.</p>"},{"location":"intro-to-cloud/#key-words","title":"Key Words","text":"<p>There are some key words you should know, which will help make your learning experience much easier.</p> <ul> <li>Virtual Machine/Instance: a term used to describe your cloud computer.</li> <li>Flavor: a flavor prescribes the size of a collection of virtual machine components, such as memory and CPU. You can\u2019t select the size of these components individually, but select a flavour type (eg: <code>small</code>, <code>medium</code>, <code>large</code>) which predefines the size of each component appropriately.</li> <li>Keypair: a keypair is a pair of files that contains a public and private key. The public key is added to your instance, and the private key is used to connect to your instance.</li> <li>Port forwarding: a way to access a service running on your instance, from your local computer, through the Cloudflare network.</li> <li>Image: a file that contains an operating system, which is added to a blank instance.</li> <li>SSH: This is short for Secure Shell. It is a way to setup an encrypted (secure) connection between your computer and the cloud computer, usually via the command line.</li> </ul>"},{"location":"intro-to-cloud/#operation-system","title":"Operation System","text":"<p>Just like your standard computer, your Cloud computer has an Operating System, this being Linux, with a number of distributions (a.k.a versions) available. At the moment, we support 2 main OS Distro: Ubuntu and CentOS.</p> <p>This is important to understand, so you know how to find instructions and/or troubleshoot problems you have. For example, you may wish to install a particular package or software on your Cloud Computer. To do this you would search \"How to install [insert package name] on Linux\", which should (hopefully!) lead to the instructions you need.</p>"},{"location":"cloud-starter/00-intro/","title":"Introduction","text":"<p>In this series we\u2019ve put together all the tutorials that you need to get started using the Midgard Cloud.</p> <p>If you have never used or interacted with the Cloud before, best to start with the Introduction to Cloud Computing</p>"},{"location":"cloud-starter/00-intro/#what-youll-learn","title":"What you\u2019ll learn","text":"<ol> <li>Setting up prerequisites: Public-Private keypairs.</li> <li>Launching and connecting: Launching and connecting to your Virtual Machine (VM).</li> <li>Installing/updating software: Using the command line on your VM.</li> <li>Data: Move some data from your local machine to your instance.</li> <li>Port forwarding: Share your instance with the world.</li> </ol>"},{"location":"cloud-starter/00-intro/#what-youll-need","title":"What you\u2019ll need","text":"<ul> <li>Access to Midgard Cloud.</li> <li>Basic computer skills.</li> <li>Terminal software.</li> <li>(Optional) Install OpenSSH - required for Windows users only</li> </ul>"},{"location":"cloud-starter/01-keypairs/","title":"Key Pairs","text":"<p>In Midgard, a public-private keypair is used instead of a password to log on to any Virtual Machine (VM) you launch. A keypair consists of two files: a private key and a public key, which belong to each other like a lock and key. The private key file should be securely stored on your computer in a location that only you can access. The public key can be used to authorise and authenticate you in a remote computer account.</p> <p>When you launch an instance in Midgard, the public key from your Midgard account is placed into your VM, so that you can use SSH to connect to your VM using the following essential connection elements:</p> <ul> <li>The cloudflare hostname of the instance</li> <li>The image user account (e.g. <code>ubuntu</code>)</li> <li>The private key that is securely stored on your computer</li> </ul>"},{"location":"cloud-starter/01-keypairs/#creating-a-key-pair","title":"Creating a Key Pair","text":"<p>To create a keypair, you can use the default settings for <code>ssh-keygen</code> with the ed25519 algorithm. Here are the steps to create a keypair:</p> <ol> <li>Open a terminal window and type the following command: <code>ssh-keygen -t ed25519</code></li> <li>Press Enter to accept the default filename and location for the keypair files.</li> <li>Enter a passphrase for your private key. You can leave this blank, but it is not recommended.</li> <li>Confirm the passphrase.</li> </ol> <p>After completing these steps, you will have two files: a private key (<code>~/.ssh/id_ed25519</code>) and a public key (<code>~/.ssh/id_ed25519.pub</code>). Make sure to store the private key in a safe location on your computer.</p>"},{"location":"cloud-starter/01-keypairs/#adding-a-key-pair","title":"Adding a Key Pair","text":"<p>To add a keypair in Midgard using your existing public key, you can use the <code>/midgard add keypair</code> command in Discord. Here are the steps to add a keypair using this command:</p> <ol> <li>Open Discord and go to the VAIT server.</li> <li>Type the following command in the #midgard-commands channel: <code>/midgard add keypair publickey:&lt;your_ssh_key&gt;</code>, where <code>&lt;your_ssh_key&gt;</code> is the content of your SSH public key file (which is the contents of <code>~/.ssh/id_ed25519.pub</code>).</li> <li>Press Enter to execute the command.</li> </ol> <p> </p> Example add keypair command in Discord <p>After completing these steps, your keypair will be added to Midgard and you can use it to launch instances.</p>"},{"location":"cloud-starter/01-keypairs/#updating-a-key-pair","title":"Updating a Key Pair","text":"<p>To update a keypair in Midgard, you can follow these steps:</p> <ol> <li>Create a new keypair by following the steps in the \"Creating a Key Pair\" section.</li> <li>Use the <code>/midgard add keypair</code> command to add the new public key to Midgard.</li> <li>Relaunch your instance and specify the new keypair when launching the instance.</li> </ol> <p>Note that the existing key on the instance is not replaced, and you will need to relaunch the instance to use the new keypair. Think of it like replacing a house key - if you're locked outside, you can't just replace the key, you will need to replace the lock as well.</p>"},{"location":"cloud-starter/02-launching-vms/","title":"Launching a VM","text":"<p>To launch a VM in Midgard Cloud, you can use the <code>/midgard server create</code> command in Discord. Here are the steps to launch a VM using this command:</p> <ol> <li>Make sure you have the <code>cloudflared</code> binary installed on your computer. You can download it from the official Cloudflare website.</li> <li>Open Discord and go to the Midgard server.</li> <li>Type the following command in the #bot-commands channel: <code>/midgard server create flavor:m1.small image:Ubuntu 22.04</code></li> <li>Press Enter to execute the command.</li> </ol> <p> </p> Example create command in Discord <p>This command will launch a VM with the following specifications:</p> <ul> <li>Flavor: m1.small (1 vCPUs, 2.0GB RAM, 20GB HDD)</li> <li>Image: Ubuntu 22.04</li> </ul> <p>Other flavor options are available:</p> <ul> <li>m1.small (1 vCPUs, 2.0GB RAM, 20GB HDD)</li> <li>m1.medium (2 vCPUs, 4.0GB RAM, 40GB HDD)</li> </ul> <p>Other image options are available:</p> <ul> <li>CentOS 7</li> <li>Ubuntu 22.04 LTS</li> </ul> <p>After completing these steps, your VM will be launched in Midgard Cloud and you can use SSH to connect to it using the public key you added to your Midgard account. Remember to specify the new keypair when launching the instance if you updated your keypair.</p>"},{"location":"cloud-starter/02-launching-vms/#accessing-the-vm","title":"Accessing the VM","text":"<p>To access your server, add the following to your <code>~/.ssh/config</code> file:</p> <pre><code>Host midgard\nHostName {hostname}\nUser {image_default_user}\nProxyCommand /usr/local/bin/cloudflared access ssh --hostname {hostname}\n</code></pre> <p>Replace <code>{hostname}</code> with the Cloudflare hostname of your VM and <code>{image_default_user}</code> with the default image user account for your image (e.g. <code>ubuntu</code> for Ubuntu images). Then you can access your server by running <code>ssh midgard</code>. The create command will give you the exact parameters.</p>"},{"location":"cloud-starter/03-installing-softwares/","title":"Installing Softwares","text":"<p>When you launch a VM in the cloud, it comes with a base image that includes a minimal set of software. However, you will often need to install additional software to run your applications or perform various tasks on the VM. In this document, we will cover how to install software on a VM running Ubuntu 22.04 and how to expose a simple web app to the internet.</p>"},{"location":"cloud-starter/03-installing-softwares/#installing-software","title":"Installing Software","text":"<p>To install software on a VM running Ubuntu 22.04, you can use the <code>apt</code> package manager. Here are the steps to install software on your VM:</p> <ol> <li>Connect to your VM using SSH. You can use the <code>ssh</code> command with the <code>midgard</code> hostname in your <code>~/.ssh/config</code> file. See the previous Launching a VM document for more details.</li> <li>Update the package list: <code>sudo apt update</code></li> <li>Install the software you need. For example, to install Node.js and npm, run: <code>sudo apt install nodejs npm</code></li> </ol> <p>You can repeat step 3 for any other software you need to install on your VM.</p>"},{"location":"cloud-starter/03-installing-softwares/#example-exposing-a-simple-web-app","title":"Example: Exposing a Simple Web App","text":"<p>To expose a simple web app to the internet, you can use the built-in <code>http-server</code> package for Node.js. Here are the steps to expose a simple web app:</p> <ol> <li>Install <code>http-server</code>: <code>sudo npm install -g http-server</code></li> <li>Create a simple web page. You can use the following example as a starting point:</li> </ol> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello, world!&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hello, world!&lt;/h1&gt;\n    &lt;p&gt;This is a simple web page.&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <ol> <li>Save this code as <code>index.html</code> in a directory of your choice.</li> <li>Start the <code>http-server</code> with the directory containing <code>index.html</code> as the root: <code>http-server /path/to/directory</code></li> <li>The web app will be accessible on port 8080 of your VM.</li> </ol> <p>Note that this is a simple web app for demonstration purposes only. For a real-world application, you will need to configure your web app properly for security and performance.</p> <p>If you want to access the web app from your local machine, you can use SSH port forwarding to forward traffic from a local port to the VM's port 8080. For example, to forward traffic from port 8080 on your local machine to port 8080 on the VM, run the following command on your local machine:</p> <pre><code>ssh -L 8080:localhost:8080 midgard\n</code></pre> <p>Then you can access the web app from your local machine at <code>http://localhost:8080</code>. Note that in this example, the web app is only accessible from your local machine on port 8080. To make it accessible from the internet, see the Port Forwarding section.</p>"},{"location":"cloud-starter/04-moving-data/","title":"Moving Data","text":"<p>You may need to move data from your VM to your local machine or upload files to your VM for various reasons. In this document, we will cover how to use <code>scp</code> or <code>rsync</code> to move data from your VM or upload files to your VM.</p>"},{"location":"cloud-starter/04-moving-data/#moving-data-from-the-vm","title":"Moving Data from the VM","text":"<p>To move data from your VM to your local machine, you can use the <code>scp</code> command. Here are the steps to move data from your VM:</p> <ol> <li>Ensure you can connect to your VM using SSH. See the previous Launching a VM document for more details.</li> <li>Use the <code>scp</code> command to copy the data from your VM to your local machine. For example, to copy a file named <code>data.txt</code> to your local machine, run the following command on your local machine:</li> </ol> <pre><code>scp midgard:/path/to/data.txt /path/to/local/directory/\n</code></pre> <p>Note that <code>midgard</code> is the hostname of your VM, and <code>/path/to/data.txt</code> is the path to the data file on your VM. <code>/path/to/local/directory/</code> is the path to the local directory where you want to copy the data.</p>"},{"location":"cloud-starter/04-moving-data/#uploading-files-to-the-vm","title":"Uploading Files to the VM","text":"<p>To upload files to your VM, you can use the <code>scp</code> or <code>rsync</code> command. Here are the steps to upload files to your VM using <code>scp</code>:</p> <ol> <li>Ensure you can connect to your VM using SSH. See the previous Launching a VM document for more details.</li> <li>Use the <code>scp</code> command to copy the files from your local machine to your VM. For example, to copy a file named <code>file.txt</code> from your local machine to your VM, run the following command on your local machine:</li> </ol> <pre><code>scp /path/to/file.txt midgard:/path/to/directory/\n</code></pre> <p>Note that <code>midgard</code> is the hostname of your VM, and <code>/path/to/directory/</code> is the path to the directory where you want to upload the file on your VM. <code>/path/to/file.txt</code> is the path to the file on your local machine that you want to upload.</p> <p>Alternatively, here are the steps to upload files to your VM using <code>rsync</code>:</p> <ol> <li>Ensure you can connect to your VM using SSH. See the previous Launching a VM document for more details.</li> <li>Use the <code>rsync</code> command to copy the files from your local machine to your VM. For example, to copy a directory named <code>data</code> from your local machine to your VM, run the following command on your local machine:</li> </ol> <pre><code>rsync -avz /path/to/data/ midgard:/path/to/directory/\n</code></pre> <p>Note that <code>midgard</code> is the hostname of your VM, and <code>/path/to/directory/</code> is the path to the directory where you want to upload the directory on your VM. <code>/path/to/data/</code> is the path to the directory on your local machine that you want to upload.</p> <p>After completing these steps, your data or files will be moved from your VM to your local machine or uploaded to your VM.</p>"},{"location":"cloud-starter/06-port-forwarding/","title":"Using Port Forwarding","text":"<p>Midgard is a lab environment that is behind a NAT. This means that your instance does not have a public IP address and is not directly accessible from the internet. To make your instance accessible from the internet, you can use port forwarding in Midgard.</p>"},{"location":"cloud-starter/06-port-forwarding/#port-forwarding-with-midgard","title":"Port Forwarding with Midgard","text":"<p>To port forward in Midgard, you can use the <code>/midgard add portforward</code> command. Here are the steps to set up port forwarding for your instance:</p> <ol> <li>Connect to the Midgard Discord server and go to the <code>#bot-commands</code> channel.</li> <li>Decide on the port you want to forward. For example, let's say you want to forward port <code>8080</code>.</li> <li>Run the following command to set up port forwarding:</li> </ol> <pre><code>/midgard add portforward port:8080\n</code></pre> <ol> <li>This will create a security group in Midgard and set up a Cloudflare tunnel to expose your instance traffic to an HTTPS endpoint. The default protocol is HTTP. Other protocol options are TCP and SSH, but protocols other than HTTP have to be proxied through the Cloudflare binary.</li> </ol> <p>After running the command, you will receive a response from Midgard with a URL that you can use to access your instance over HTTPS.</p> <p>The URL will automatically terminate SSL for you.</p>"}]}